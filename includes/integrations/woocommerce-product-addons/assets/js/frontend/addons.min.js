!function(w,u){const t=PaoValidation;function o(a){return this instanceof o?!!a.length&&(this.$el=a,this.$addons=this.$el.find(".wc-pao-addon-field"),this.$addons.length?(this.is_rtl="rtl"===document.documentElement.dir,this.validation=new t(this),this.totals=new e(this),this.show_incomplete_subtotals=this.totals.showIncompleteSubtotals(),this.contains_required=this.containsRequired(),this.setupEvents(),this.validation.validate(),this.updateTotals(),w(".wc-pao-addon-image-swatch").tipTip({delay:200}),void WC_PAO.initialized_forms.push(this)):this.$addons=!1):new o(a)}function e(a){return this instanceof e?!w.isEmptyObject(a)&&(this.$form=a.$el,this.$addons=a.$addons,this.$variation_input=!!this.$form.hasClass("variations_form")&&this.$form.find('input[name="variation_id"], input.variation_id'),this.is_variable=this.$variation_input&&0<this.$variation_input.length,this.$totals=this.$form.find("#product-addons-total"),this.product_id=this.is_variable?this.$variation_input.val():this.$totals.data("product-id"),!!this.product_id)&&(this.base_price=this.$totals.data("price"),this.raw_price=this.$totals.data("raw-price"),this.product_type=this.$totals.data("type"),this.qty=parseFloat(this.$form.find("input.qty").val()),this.addons_price_data=[],this.$subscription_plans=this.$form.find(".wcsatt-options-product"),this.has_subscription_plans=0<this.$subscription_plans.length,this.is_rtl=a.is_rtl,this.total=0,this.total_raw=0,this.show_subtotal_panel=!0,void(this.price_request=null)):new e(a)}(WC_PAO=u.WC_PAO||{}).initialized_forms=[],WC_PAO.Helper={escapeHtml:function(a){return document.createElement("div").appendChild(document.createTextNode(a)).parentNode.innerHTML},isGroupedSubsSelected:function(){var a=w(".product-type-grouped"),t=!1;return a.length&&a.find(".group_table tr.product").each(function(){if(0<w(this).find(".input-text.qty").val()&&w(this).find(".entry-summary .subscription-details").length)return!(t=!0)}),t},addMinutes:function(a,t){return new Date(a.getTime()+6e4*t)},isGroupedMixedProductType:function(){var a=w(".product-type-grouped"),t=0,o=0;return!!(a.length&&(a.find(".group_table tr.product").each(function(){0<w(this).find(".input-text.qty").val()&&(w(this).find(".entry-summary .subscription-details").length?t++:o++)}),0<t)&&0<o)},delay:function(a,t){clearTimeout(0),setTimeout(a,t)}},WC_PAO.Form=(o.prototype.setupEvents=function(){var n,i=this;i.$el.find('button[type="submit"]').on("click",function(){var a;return!!i.validation.validate(!0)||(0<(a=i.$el.find(".wc-pao-validation-notice")).length&&0<(a=i.$el.find(a[0].closest(".wc-pao-addon-container"))).length&&!i.is_in_viewport(a)&&a[0].scrollIntoView(),!1)}),i.$el.on("blur change",".wc-pao-addon input:not(.wc-pao-addon-file-upload), .wc-pao-addon textarea, .wc-pao-addon select, .wc-pao-addon-custom-text",function(){i.validation.validateAddon(w(this),!0),i.updateTotals()}),i.$el.on("change",".wc-pao-addon input.wc-pao-addon-file-upload",function(){const a=w(this);var t=a.closest(".wc-pao-addon-container"),o=t.find(".reset_file"),t=t.find(".wc-pao-addon-file-name");o.length&&o.addClass("active"),t.length&&t.hide(250,function(){w(this).remove(),a.data("value","")}),i.validation.validateAddon(a,!0),i.updateTotals()}),i.$el.on("keyup",".wc-pao-addon input, .wc-pao-addon textarea, .wc-pao-addon-custom-text",function(){var a=w(this);WC_PAO.Helper.delay(function(){i.validation.validateAddon(a,!0),i.updateTotals()},300)}),i.$el.on("change","input.qty",function(){i.updateTotals()}),i.$el.on("touchstart",".wc-pao-addon-image-swatch",function(a){n=new Date}),i.$el.on("click touchend",".wc-pao-addon-image-swatch",function(a){if((a.preventDefault(),"touchend"===a.type&&n)&&100<new Date-n)return;var a=w(this).data("value"),t=w(this).parents(".wc-pao-addon-wrap"),o=w.parseHTML(w(this).data("price")),e=t.find(".wc-pao-addon-image-swatch-selected-swatch");e.html(""),t.find(".wc-pao-addon-image-swatch").removeClass("selected"),w(this).addClass("selected"),t.find(".wc-pao-addon-image-swatch-select").val(a),e.html(o),i.validation.validateAddon(t.find("select.wc-pao-addon-field"),!0),i.updateTotals()}),i.$el.on("click",".reset_variations",function(){i.totals.reset()}),i.$el.on("wc_variation_form",function(){i.validation.validate(),i.updateTotals()}),i.$el.on("found_variation",function(a,t){i.totals.updateVariation(t),i.validation.validate(),i.updateTotals()}),i.$el.on("hide_variation",function(a){i.updateTotals()}),i.$el.on("woocommerce-product-addons-update",function(){i.validation.validate(),i.updateTotals()}),i.$el.find(".datepicker").each(function(){var o=w(this),a=o.parent(),e=a.find(".reset_date"),n=a.find('input[name="'+o.attr("name")+'-wc-pao-date"]'),t=a.find('input[name="'+o.attr("name")+'-wc-pao-date-gmt-offset"]'),a=(t.length||((t=w("<input/>")).attr("type","hidden"),t.attr("name",o.attr("name")+"-wc-pao-date-gmt-offset"),a.append(t)),new Date),i=parseFloat(woocommerce_addons_params.gmt_offset,10),s=a.getTimezoneOffset()/60,t=("default"===woocommerce_addons_params.date_input_timezone_reference?t.val(s):"store"===woocommerce_addons_params.date_input_timezone_reference&&(a.getHours(),a.getMinutes(),t.val(i)),o.datepicker({beforeShow:function(a,t){woocommerce_addons_params.datepicker_class&&(w("#ui-datepicker-div").removeClass(woocommerce_addons_params.datepicker_class),w("#ui-datepicker-div").addClass(woocommerce_addons_params.datepicker_class))},dateFormat:woocommerce_addons_params.datepicker_date_format,changeMonth:!0,changeYear:!0,yearRange:"c-100:c+10"}),o.datepicker("getDate"));null!==t&&"function"==typeof t.getTime&&(t.setHours(a.getHours(),a.getMinutes()),"store"===woocommerce_addons_params.date_input_timezone_reference&&(t=WC_PAO.Helper.addMinutes(t,-1*s*60),t=WC_PAO.Helper.addMinutes(t,60*i)),n.val(t.getTime()/1e3),e.show()),o.on("change",function(){var a,t=o.datepicker("getDate");null!==t&&"function"==typeof t.getTime?(a=new Date,t.setHours(a.getHours(),a.getMinutes()),"store"===woocommerce_addons_params.date_input_timezone_reference&&(t=WC_PAO.Helper.addMinutes(t,-1*s*60),t=WC_PAO.Helper.addMinutes(t,60*i)),n.val(t.getTime()/1e3),e.show()):(e.hide(),n.val(""))}),e.on("click",function(a){a.preventDefault(),n.val(""),o.val("").trigger("change")})}),i.$el.on("click",".reset_file",function(a){a.preventDefault();var a=w(this).closest(".wc-pao-addon-container"),t=a.find("input.wc-pao-addon-field"),a=a.find(".wc-pao-addon-file-name");a.length&&a.hide(250,function(){w(this).remove()}),w(this).removeClass("active").addClass("inactive"),t.data("value",""),t.val(""),i.validation.validateAddon(t,!0),i.updateTotals()}),w("#credit_called").on("keyup",function(){i.validation.validate(),i.updateTotals()})},o.prototype.updateTotals=function(){this.totals.calculate(),(this.show_incomplete_subtotals||this.isValid())&&(this.contains_required||this.totals.$totals.data("price_data").length)?this.totals.render():this.totals.reset()},o.prototype.isValid=function(){var a=!0;return this.$el.find("button.single_add_to_cart_button").is(".disabled")?a=!1:(w.each(this.validation.getValidationState(),function(){if(!this.validity)return a=!1}),a)},o.prototype.containsRequired=function(){var t=!1;return this.$addons.each(function(){var a=w(this).data("restrictions");if(!w.isEmptyObject(a)&&"required"in a&&"yes"===a.required)return t=!0}),t},o.prototype.is_in_viewport=function(a,t,o,e){var n,i,s,d,c,r,p,l=w(u);if(!(a.length<1))return s=(a=1<a.length?a.eq(0):a).get(0),c=l.width(),p=l.height(),o=!0!==o||s.offsetWidth*s.offsetHeight,e=e||"vertical","function"==typeof s.getBoundingClientRect?(r=0<=(s=s.getBoundingClientRect()).top&&s.top<p,n=0<s.bottom&&s.bottom<=p,d=s.top<0&&s.bottom>p,i=0<=s.left&&s.left<c,s=0<s.right&&s.right<=c,d=t?r||n||d:r&&n,r=t?i||s:i&&s,"both"===e?o&&d&&r:"vertical"===e?o&&d:"horizontal"===e?o&&r:void 0):(i=(n=l.scrollTop())+p,d=(s=l.scrollLeft())+c,l=(p=(r=a.offset()).top)+a.height(),r=(c=r.left)+a.width(),a=!0===t?l:p,p=!0===t?p:l,l=!0===t?r:c,t=!0===t?c:r,"both"===e?!!o&&p<=i&&n<=a&&t<=d&&s<=l:"vertical"===e?!!o&&p<=i&&n<=a:"horizontal"===e?!!o&&t<=d&&s<=l:void 0)},e.prototype.showIncompleteSubtotals=function(){return 1===this.$totals.data("show-incomplete-sub-total")},e.prototype.updateVariation=function(a){this.$variation_input=!!this.$form.hasClass("variations_form")&&this.$form.find('input[name="variation_id"], input.variation_id'),this.product_id=a.variation_id,this.$totals.data("product-id",this.product_id),"undefined"!=typeof a.display_price?this.base_price=a.display_price:w(a.price_html).find(".amount").last().length&&(this.base_price=w(a.price_html).find(".amount").last().text(),this.base_price=this.base_price.replace(woocommerce_addons_params.currency_format_symbol,""),this.base_price=this.base_price.replace(woocommerce_addons_params.currency_format_thousand_sep,""),this.base_price=this.base_price.replace(woocommerce_addons_params.currency_format_decimal_sep,"."),this.base_price=this.base_price.replace(/[^0-9\.]/g,""),this.base_price=parseFloat(this.base_price)),this.$totals.data("price",this.base_price)},e.prototype.calculate=function(){var h=this;h.qty=parseFloat(h.$form.find("input.qty").val()),h.addons_price_data=[],h.total=0,h.total_raw=0,h.base_price=h.$totals.data("price"),h.raw_price=h.$totals.data("raw-price"),h.product_id=h.is_variable?h.$variation_input.val():h.$totals.data("product-id"),""===h.base_price&&"undefined"!=typeof custom_gift_card_amount&&custom_gift_card_amount.length&&0<custom_gift_card_amount.val()&&(h.base_price=custom_gift_card_amount.val()),woocommerce_addons_params.is_bookings&&w(".wc-bookings-booking-cost").length&&(h.base_price=parseFloat(w(".wc-bookings-booking-cost").attr("data-raw-price"))),this.$addons.each(function(){var a=w(this),t=a.parents(".wc-pao-addon");if((!a.is(".wc-pao-addon-file-upload")||!t.find(".wc-pao-addon-file-name input").length||t.find(".wc-pao-addon-file-name input").val())&&(a.is(".wc-pao-addon-file-upload")&&t.find(".wc-pao-addon-file-name input").length||a.val())){var o,e,n,i=t.find(".wc-pao-addon-name").length?t.find(".wc-pao-addon-name").data("addon-name"):"",s="",d=0,c=0,r=a.data("price-type"),p=0,l=a.data("duration-type"),u=!1,_={},m=!!t.find(".wc-pao-addon-name").length&&t.find(".wc-pao-addon-name").data("has-per-person-pricing"),f=!!t.find(".wc-pao-addon-name").length&&t.find(".wc-pao-addon-name").data("has-per-block-pricing");if(a.is(".wc-pao-addon-custom-price"))u=!0,d=a.val(),c=a.val(),r="quantity_based","."!==woocommerce_addons_params.currency_format_decimal_sep&&(d=d.replace(woocommerce_addons_params.currency_format_decimal_sep,"."),c=c.replace(woocommerce_addons_params.currency_format_decimal_sep,"."));else if(a.is(".wc-pao-addon-input-multiplier"))""!==a.val()&&(a.val(Math.ceil(a.val())),d=a.data("price")*a.val(),c=a.data("raw-price")*a.val(),a.data("duration"),a.val(),p=a.data("raw-duration")*a.val());else if(a.is(".wc-pao-addon-checkbox, .wc-pao-addon-radio")){if(!a.is(":checked"))return;s=a.data("label"),d=a.data("price"),c=a.data("raw-price"),a.data("duration"),p=a.data("raw-duration")}else if(a.is(".wc-pao-addon-image-swatch-select, .wc-pao-addon-select")){if(!a.find("option:selected")||""===a.find("option:selected").val())return;r=a.find("option:selected").data("price-type"),l=a.find("option:selected").data("duration-type"),s=a.find("option:selected").data("label"),d=a.find("option:selected").data("price"),c=a.find("option:selected").data("raw-price"),a.find("option:selected").data("duration"),p=a.find("option:selected").data("raw-duration")}else if(a.is(".wc-pao-addon-file-upload"))d=a.data("price"),c=a.data("raw-price");else{if(!a.val())return;d=a.data("price"),c=a.data("raw-price"),a.data("duration"),p=a.data("raw-duration")}switch(d=d||0,c=c||0,p=p||0,"booking"!==h.product_type&&"accommodation-booking"!==h.product_type||!woocommerce_addons_params.is_bookings||(void(o=h.qty=0)!==w("#wc_bookings_field_duration")&&0<w("#wc_bookings_field_duration").val()&&(o=w("#wc_bookings_field_duration").val()),void 0!==w("#wc-bookings-form-end-time")&&0<w("#wc-bookings-form-end-time").val()&&(o=w("#wc-bookings-form-end-time").val()),n=w("#wc_bookings_field_persons"),e=0,1===n.length?e=parseInt(e,10)+parseInt(n.val(),10):w(".wc-bookings-booking-form").find("input").each(function(){var a=this.id.match(/wc_bookings_field_persons_(\d+)/);null!=a&&w("#"+a[0]).length&&(e=parseInt(e,10)+parseInt(w("#"+a[0]).val(),10))}),0===h.qty&&w(".wc-bookings-booking-cost").length&&(h.qty=1),m&&e&&(h.qty*=e),f&&o&&(h.qty*=o)),r){case"flat_fee":_.cost=parseFloat(d),_.cost_raw=parseFloat(c);break;case"quantity_based":_.cost_pu=parseFloat(d),_.cost_raw_pu=parseFloat(c),_.cost=_.cost_pu*h.qty,_.cost_raw=_.cost_raw_pu*h.qty;break;case"percentage_based":_.cost_pct=parseFloat(d)/100,_.cost_raw_pct=parseFloat(c)/100,_.cost=parseFloat(h.base_price)*_.cost_pct*h.qty,_.cost_raw=parseFloat(h.raw_price)*_.cost_raw_pct*h.qty}switch(h.total+=_.cost||0,h.total_raw+=_.cost_raw||0,l){case"flat_time":case"":_.duration=p,_.duration_raw=p;break;case"quantity_based":_.duration_pu=p,_.duration_raw_pu=p,_.duration=_.duration_pu*h.qty,_.duration_raw=_.duration_raw_pu*h.qty}void 0!==s&&("number"==typeof s||s.length?(_.name=i+(s?" - "+s:""),_.nameFormattedHTML='<span class="wc-pao-addon-name">'+i+"</span>"+(s?' - <span class="wc-pao-addon-value">'+s+"</span>":"")):(n=a.val(),m=parseInt(woocommerce_addons_params.trim_user_input_characters,10),a.is(".wc-pao-addon-file-upload")?n=(n=t.find(".wc-pao-addon-file-name").length?t.find(".wc-pao-addon-file-name").data("value"):n).replace(/^.*[\\\/]/,""):a.is(".wc-pao-addon-custom-price")&&("."!==woocommerce_addons_params.currency_format_decimal_sep&&(n=n.replace(woocommerce_addons_params.currency_format_decimal_sep,".")),n=accounting.formatNumber(n,{symbol:"",decimal:woocommerce_addons_params.currency_format_decimal_sep,precision:parseFloat(n)%1==0?0:n.toString().split(".")[1].length})),m<n.length&&(n=n.slice(0,m)+"..."),_.name=i+" - "+WC_PAO.Helper.escapeHtml(n),_.nameFormattedHTML='<span class="wc-pao-addon-name">'+i+'</span> - <span class="wc-pao-addon-value">'+WC_PAO.Helper.escapeHtml(n)+"</span>"),_.is_custom_price=u,_.price_type=r,_.duration_type=l,h.addons_price_data.push(_))}}),h.$totals.data("price_data",h.addons_price_data),h.$form.trigger("updated_addons")},e.prototype.render=function(){var a,o,e,t,n,i,s,d,c,r=this;r.$totals.data("show-sub-total")&&r.qty&&(r.formatMoney(r.total),e=!1,"undefined"!=typeof r.base_price&&r.product_id&&(a=w(".wc-bookings-booking-form").length||w(".wc-appointments-appointment-cost").length?isNaN(r.base_price)?0:parseFloat(r.base_price):parseFloat(r.base_price*r.qty),o=r.formatMoney(a+r.total)),r.has_subscription_plans?(t=r.$form.data("satt_script"))&&t.schemes_model.get_active_scheme_key()&&(t=r.$subscription_plans.find("input:checked")).val()&&(n=t.parent().find(".subscription-details")):r.$form.parent().find(".subscription-details").length&&!r.$form.hasClass("bundle_data")&&(n=r.$form.parent().find(".subscription-details"),r.$variation_input)&&0<r.$variation_input.length&&(n=r.$form.parent().find(".woocommerce-variation .subscription-details")),n&&0<n.length&&(i=" "+n.clone().wrap("<p>").parent().html()),"grouped"===r.product_type?i&&!WC_PAO.Helper.isGroupedMixedProductType()&&WC_PAO.Helper.isGroupedSubsSelected()&&o&&(o+=i):i&&o&&(o+=i),o)?(t=r.$form.find(".wc-pao-addon-container").data("product-name"),n=r.formatMoney(a),i=r.$form.find(".wc-pao-addon-container").data("product-tax-status"),s=w(".wc-bookings-booking-form").length?'<div class="product-addon-totals"><ul><li><div class="wc-pao-col1"><strong>'+t+'</strong></div><div class="wc-pao-col2"><strong><span class="amount">'+n+"</span></strong></div></li>":'<div class="product-addon-totals"><ul><li><div class="wc-pao-col1"><strong><span>'+(r.is_rtl?woocommerce_addons_params.quantity_symbol+r.qty:r.qty+woocommerce_addons_params.quantity_symbol)+"</span> "+t+'</strong></div><div class="wc-pao-col2"><strong><span class="amount">'+n+"</span></strong></div></li>",r.addons_price_data.length&&w.each(r.addons_price_data,function(a,t){var o=t.cost,o=0===o?"-":0<o?r.formatMoney(o):"-"+r.formatMoney(Math.abs(o));s=s+'<li><div class="wc-pao-col1"><strong>'+t.nameFormattedHTML+'</strong></div><div class="wc-pao-col2"><span class="amount">'+o+"</span></div></li>",woocommerce_addons_params.tax_enabled&&t.is_custom_price&&(e=!0)}),d="",c=void 0===r.$totals.data("i18n_sub_total")?woocommerce_addons_params.i18n_sub_total:r.$totals.data("i18n_sub_total"),e||woocommerce_addons_params.price_display_suffix&&woocommerce_addons_params.tax_enabled?"taxable"!==i||e||!1!=-1<woocommerce_addons_params.price_display_suffix.indexOf("{price_including_tax}")||!1!=-1<woocommerce_addons_params.price_display_suffix.indexOf("{price_excluding_tax}")?r.price_request=w.ajax({type:"POST",url:woocommerce_addons_params.ajax_url,data:{action:"wc_product_addons_calculate_tax",product_id:r.product_id,add_on_total:r.total,add_on_total_raw:r.total_raw,qty:r.qty},beforeSend:function(){null!=r.price_request&&r.price_request.abort()},complete:function(){r.price_request=null},success:function(a){var t;s="SUCCESS"==a.result?(d='<small class="woocommerce-price-suffix">'+woocommerce_addons_params.price_display_suffix+"</small>",t=r.formatMoney(a.price_including_tax),a=r.formatMoney(a.price_excluding_tax),d=(d=d.replace("{price_including_tax}",'<span class="amount">'+t+"</span>")).replace("{price_excluding_tax}",'<span class="amount">'+a+"</span>"),t=woocommerce_addons_params.display_include_tax?t:a,s+'<li class="wc-pao-subtotal-line"><p class="price">'+c+' <span class="amount">'+t+"</span> "+d+" </p></li></ul></div>"):s+'<li class="wc-pao-subtotal-line"><p class="price">'+c+' <span class="amount">'+o+"</span></p></li></ul></div>",r.show_subtotal_panel?r.$totals.html(s):r.$totals.html(""),r.$form.trigger("updated_addons")},error:function(){s=s+'<li class="wc-pao-subtotal-line"><p class="price">'+c+' <span class="amount">'+o+"</span></p></li></ul></div>",r.show_subtotal_panel?r.$totals.html(s):r.$totals.html(""),r.$form.trigger("updated_addons")}}):(s=s+'<li class="wc-pao-subtotal-line"><strong>'+c+' <span class="amount">'+o+"</span> "+woocommerce_addons_params.price_display_suffix+"</strong></li></ul></div>",r.show_subtotal_panel?r.$totals.html(s):r.$totals.html(""),r.$form.trigger("updated_addons")):(s=s+'<li class="wc-pao-subtotal-line"><p class="price">'+c+' <span class="amount">'+o+"</span></p></li></ul></div>",r.show_subtotal_panel?r.$totals.html(s):r.$totals.html(""),r.$form.trigger("updated_addons"))):(r.$totals.empty(),r.$form.trigger("updated_addons"))},e.prototype.reset=function(){this.$totals.empty(),this.$totals.html(""),this.$form.trigger("updated_addons")},e.prototype.formatMoney=function(a){let t=woocommerce_addons_params.currency_format_num_decimals;var o;return woocommerce_addons_params.trim_trailing_zeros&&(o=parseFloat(a)%1==0,a=parseFloat(a),t=o?0:a.toString().split(".")[1].length),accounting.formatMoney(a,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:t,format:woocommerce_addons_params.currency_format})},o),w(function(){w("body").on("quick-view-displayed",function(){w(this).find(".cart:not(.cart_group)").each(function(){new WC_PAO.Form(w(this))})}),w("body").find(".cart:not(.cart_group)").each(function(){new WC_PAO.Form(w(this))})})}(jQuery,window),jQuery(function(w){var g={isGroupedMixedProductType:function(){var a=w(".product-type-grouped"),t=0,o=0;return!!(a.length&&(a.find(".group_table tr.product").each(function(){0<w(this).find(".input-text.qty").val()&&(w(this).find(".entry-summary .subscription-details").length?t++:o++)}),0<t)&&0<o)},escapeHtml:function(a){return document.createElement("div").appendChild(document.createTextNode(a)).parentNode.innerHTML},isGroupedSubsSelected:function(){var a=w(".product-type-grouped"),t=!1;return a.length&&a.find(".group_table tr.product").each(function(){if(0<w(this).find(".input-text.qty").val()&&w(this).find(".entry-summary .subscription-details").length)return!(t=!0)}),t},formatMoney:function(a){return accounting.formatMoney(a,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.trim_trailing_zeros?0:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format})},getCostByTax:function(a,t){t=(!woocommerce_addons_params.price_include_tax||!woocommerce_addons_params.display_include_tax)&&(woocommerce_addons_params.price_include_tax&&!woocommerce_addons_params.display_include_tax||!woocommerce_addons_params.price_include_tax&&woocommerce_addons_params.display_include_tax||woocommerce_addons_params.price_include_tax||woocommerce_addons_params.display_include_tax)?t:a;return t},init:function(a){var u=a,_=!!u.hasClass("variations_form")&&u.find('input[name="variation_id"], input.variation_id'),a=(u.on("click",".reset_variations",function(){w.each(u.find(".product-addon"),function(){var a=w(this).find(".addon");(a.is(":checkbox")||a.is(":radio"))&&a.prop("checked",!1),a.is("select")&&a.prop("selectedIndex",0),(a.is(":text")||a.is("textarea")||a.is('input[type="number"]')||a.is('input[type="file"]'))&&a.val("")}),u.trigger("woocommerce-product-addons-update")}).on("mouseup","input[type=number]",function(){w(this).trigger("woocommerce-product-addons-update")}).on("keyup change",".wc-pao-addon input, .wc-pao-addon textarea",function(){var a;0<w(this).attr("maxlength")&&(a=w(this).val(),a=w(this).attr("maxlength")-a.length,w(this).next(".wc-pao-addon-chars-remaining").find("span").text(a))}).on("input change",".wc-pao-addon input, .wc-pao-addon textarea, .wc-pao-addon select, input.qty, .wc-pao-addon-custom-text, .wc-pao-addon-custom-price",function(){w(this).trigger("woocommerce-product-addons-update")}).on("found_variation",function(a,t){var o=w(this),e=o.find("#product-addons-total");"undefined"!=typeof t.display_price?e.data("price",t.display_price):w(t.price_html).find(".amount:last").length&&(t=(t=(t=(t=(t=w(t.price_html).find(".amount").last().text()).replace(woocommerce_addons_params.currency_format_symbol,"")).replace(woocommerce_addons_params.currency_format_thousand_sep,"")).replace(woocommerce_addons_params.currency_format_decimal_sep,".")).replace(/[^0-9\.]/g,""),t=parseFloat(t),e.data("price",t)),o.trigger("woocommerce-product-addons-update")}).on("woocommerce-product-addons-update",function(){var a,o,t,e,n,i,s,d,f=0,h=0,c=u.find("#product-addons-total"),r=_&&0<_.length,p=u.find(".wcsatt-options-product"),l=0<p.length;product_id=r?_.val():c.data("product-id"),product_price=c.data("price"),product_type=c.data("type"),qty=parseFloat(u.find("input.qty").val()),addons=[],""===product_price&&"undefined"!=typeof custom_gift_card_amount&&custom_gift_card_amount.length&&0<custom_gift_card_amount.val()&&(product_price=custom_gift_card_amount.val()),woocommerce_addons_params.is_bookings&&w(".wc-bookings-booking-cost").length&&(product_price=parseFloat(w(".wc-bookings-booking-cost").attr("data-raw-price"))),w(".wc-appointments-appointment-cost").length,u.find(".wc-pao-required-addon").each(function(){var a=w(this).find(":checkbox[required]");a.on("change",function(){a.is(":checked")?a.prop("required",!1):a.prop("required",!0)})}),u.find(".wc-pao-addon-field").each(function(){var a,t,o,e=w(this),n=e.parents(".wc-pao-addon"),i=n.find(".wc-pao-addon-name").length?n.find(".wc-pao-addon-name").data("addon-name"):"",s="",d=0,c=0,r=e.data("price-type"),p=0,l=e.data("duration-type"),u=!1,_={},m=!!n.find(".wc-pao-addon-name").length&&n.find(".wc-pao-addon-name").data("has-per-person-pricing"),n=!!n.find(".wc-pao-addon-name").length&&n.find(".wc-pao-addon-name").data("has-per-block-pricing");if(e.is(".wc-pao-addon-custom-price")){if(!e.val())return;u=!0,d=e.val(),c=e.val(),r="quantity_based"}else if(e.is(".wc-pao-addon-input-multiplier")){if(isNaN(e.val())||""===e.val()?(e.val(""),e.closest("p").find(".wc-pao-addon-alert").show()):(""!==e.val()&&e.val(Math.ceil(e.val())),e.closest("p").find(".wc-pao-addon-alert").hide()),!e.val())return;d=e.data("price")*e.val(),c=e.data("raw-price")*e.val(),e.data("duration"),e.val(),p=e.data("raw-duration")*e.val()}else if(e.is(".wc-pao-addon-checkbox, .wc-pao-addon-radio")){if(!e.is(":checked"))return;s=e.data("label"),d=e.data("price"),c=e.data("raw-price"),e.data("duration"),p=e.data("raw-duration")}else if(e.is(".wc-pao-addon-image-swatch-select, .wc-pao-addon-select")){if(!e.find("option:selected")||""===e.find("option:selected").val())return;r=e.find("option:selected").data("price-type"),l=e.find("option:selected").data("duration-type"),e.val()&&(s=e.find("option:selected").data("label"),d=e.find("option:selected").data("price"),c=e.find("option:selected").data("raw-price"),e.find("option:selected").data("duration"),p=e.find("option:selected").data("raw-duration"))}else{if(!e.val())return;d=e.data("price"),c=e.data("raw-price"),e.data("duration"),p=e.data("raw-duration")}switch(d=d||0,c=c||0,p=p||0,"booking"!==product_type&&"accommodation-booking"!==product_type||!woocommerce_addons_params.is_bookings||(void(a=qty=0)!==w("#wc_bookings_field_duration")&&0<w("#wc_bookings_field_duration").val()&&(a=w("#wc_bookings_field_duration").val()),void 0!==w("#wc-bookings-form-end-time")&&0<w("#wc-bookings-form-end-time").val()&&(a=w("#wc-bookings-form-end-time").val()),o=w("#wc_bookings_field_persons"),t=0,1===o.length?t=parseInt(t,10)+parseInt(o.val(),10):w(".wc-bookings-booking-form").find("input").each(function(){var a=this.id.match(/wc_bookings_field_persons_(\d+)/);null!=a&&w("#"+a[0]).length&&(t=parseInt(t,10)+parseInt(w("#"+a[0]).val(),10))}),0===qty&&w(".wc-bookings-booking-cost").length&&(qty=1),m&&t&&(qty*=t),n&&a&&(qty*=a)),r){case"flat_fee":_.cost=parseFloat(d),_.cost_raw=parseFloat(c);break;case"quantity_based":_.cost_pu=parseFloat(d),_.cost_raw_pu=parseFloat(c),_.cost=_.cost_pu*qty,_.cost_raw=_.cost_raw_pu*qty;break;case"percentage_based":_.cost_pct=parseFloat(d)/100,_.cost_raw_pct=parseFloat(c)/100,_.cost=parseFloat(product_price)*_.cost_pct*qty,_.cost_raw=parseFloat(product_price)*_.cost_raw_pct*qty}switch(f+=_.cost||0,h+=_.cost_raw||0,l){case"flat_time":case"":_.duration=p,_.duration_raw=p;break;case"quantity_based":_.duration_pu=p,_.duration_raw_pu=p,_.duration=_.duration_pu*qty,_.duration_raw=_.duration_raw_pu*qty}void 0!==s&&("number"==typeof s||s.length?_.name=i+(s?" - "+s:""):(o=e.val(),(m=parseInt(woocommerce_addons_params.trim_user_input_characters,10))<(o=e.is(".wc-pao-addon-file-upload")?o.replace(/^.*[\\\/]/,""):o).length&&(o=o.slice(0,m)+"..."),_.name=i+" - "+g.escapeHtml(o)),_.is_custom_price=u,_.price_type=r,_.duration_type=l,addons.push(_))}),c.data("price_data",addons),qty&&(g.formatMoney(f),"undefined"!=typeof product_price&&product_id&&(a=w(".wc-bookings-booking-form").length||w(".wc-appointments-appointment-cost").length?isNaN(product_price)?0:parseFloat(product_price):parseFloat(product_price*qty),o=g.formatMoney(a+f)),l?(r=u.data("satt_script"))&&r.schemes_model.get_active_scheme_key()&&(l=p.find("input:checked")).val()&&(t=l.parent().find(".subscription-details")):u.parent().find(".subscription-details").length&&!u.hasClass("bundle_data")&&(t=u.parent().find(".subscription-details"),_)&&0<_.length&&(t=u.parent().find(".woocommerce-variation .subscription-details")),t&&0<t.length&&(e=" "+t.clone().wrap("<p>").parent().html()),"grouped"===product_type?e&&!isGroupedMixedProductType()&&isGroupedSubsSelected()&&o&&(o+=e):e&&o&&(o+=e),o)&&"1"==c.data("show-sub-total")?(r=u.find(".wc-pao-addon-container").data("product-name"),p=g.formatMoney(a),n=w(".wc-bookings-booking-form").length?'<div class="product-addon-totals"><ul><li><div class="wc-pao-col1"><strong>'+r+'</strong></div><div class="wc-pao-col2"><strong><span class="amount">'+p+"</span></strong></div></li>":'<div class="product-addon-totals"><ul><li><div class="wc-pao-col1"><strong><span>'+(m()?woocommerce_addons_params.quantity_symbol+qty:qty+woocommerce_addons_params.quantity_symbol)+"</span> "+r+'</strong></div><div class="wc-pao-col2"><strong><span class="amount">'+p+"</span></strong></div></li>",i=!1,addons.length&&(w.each(addons,function(a,t){var o;"quantity_based"===t.price_type&&(o=0===(o=g.getCostByTax(t.cost_raw,t.cost))?"-":g.formatMoney(o),n=n+'<li class="wc-pao-row-quantity-based"><div class="wc-pao-col1">'+t.name+'</div><div class="wc-pao-col2"><span class="amount">'+o+"</span></div></li>"),woocommerce_addons_params.tax_enabled&&t.is_custom_price&&(i=!0)}),w.each(addons,function(a,t){var o;"quantity_based"!==t.price_type&&(o=0===(o="percentage_based"!==t.price_type?g.getCostByTax(t.cost_raw,t.cost):t.cost_raw)?"-":'<span class="amount">'+g.formatMoney(o)+"</span>",n=n+'<li><div class="wc-pao-col1"><strong>'+t.name+'</strong></div><div class="wc-pao-col2">'+o+"</div></li>")})),s="",d=void 0===c.data("i18n_sub_total")?woocommerce_addons_params.i18n_sub_total:c.data("i18n_sub_total"),i||woocommerce_addons_params.price_display_suffix&&woocommerce_addons_params.tax_enabled?i||!1!=-1<woocommerce_addons_params.price_display_suffix.indexOf("{price_including_tax}")||!1!=-1<woocommerce_addons_params.price_display_suffix.indexOf("{price_excluding_tax}")?w.ajax({type:"POST",url:woocommerce_addons_params.ajax_url,data:{action:"wc_product_addons_calculate_tax",product_id:product_id,add_on_total:f,add_on_total_raw:h,qty:qty},success:function(a){var t;n="SUCCESS"==a.result?(s='<small class="woocommerce-price-suffix">'+woocommerce_addons_params.price_display_suffix+"</small>",t=g.formatMoney(a.price_including_tax),a=g.formatMoney(a.price_excluding_tax),s=(s=s.replace("{price_including_tax}",'<span class="amount">'+t+"</span>")).replace("{price_excluding_tax}",'<span class="amount">'+a+"</span>"),t=woocommerce_addons_params.display_include_tax?t:a,n+'<li class="wc-pao-subtotal-line"><p class="price">'+d+' <span class="amount">'+t+"</span> "+s+" </p></li></ul></div>"):n+'<li class="wc-pao-subtotal-line"><p class="price">'+d+' <span class="amount">'+o+"</span></p></li></ul></div>",c.html(n),u.trigger("updated_addons")},error:function(){n=n+'<li class="wc-pao-subtotal-line"><p class="price">'+d+' <span class="amount">'+o+"</span></p></li></ul></div>",c.html(n),u.trigger("updated_addons")}}):(n=n+'<li class="wc-pao-subtotal-line"><strong>'+d+' <span class="amount">'+o+"</span> "+woocommerce_addons_params.price_display_suffix+"</strong></li></ul></div>",c.html(n),u.trigger("updated_addons")):(n=n+'<li class="wc-pao-subtotal-line"><p class="price">'+d+' <span class="amount">'+o+"</span></p></li></ul></div>",c.html(n),u.trigger("updated_addons"))):(c.empty(),u.trigger("updated_addons"))}).on("click touchend",".wc-pao-addon-image-swatch",function(a){a.preventDefault();var a=w(this).data("value"),t=w(this).parents(".wc-pao-addon-wrap"),o=w.parseHTML(w(this).data("price"));t.prevAll("label").find(".wc-pao-addon-image-swatch-price").remove(),t.find(".wc-pao-addon-image-swatch").removeClass("selected"),w(this).addClass("selected"),t.find(".wc-pao-addon-image-swatch-select").val(a),t.prevAll("label").append(w(o)),u.trigger("woocommerce-product-addons-update")}),u.find(" .wc-pao-addon-custom-text, .wc-pao-addon-custom-textarea").each(function(){0<w(this).attr("maxlength")&&w(this).after('<small class="wc-pao-addon-chars-remaining">'+woocommerce_addons_params.i18n_remaining+"</small>")}),w("#credit_called").on("keyup",function(){u.trigger("woocommerce-product-addons-update")}),u.find(".wc-pao-addon-custom, .wc-pao-addon-custom-textarea, .wc-pao-addon input, .wc-pao-addon textarea, .wc-pao-addon select, input.qty, .variations select").trigger("change"),u.get(0).querySelector('button[type="submit"]')),a=(a&&a.addEventListener("click",function(){var a=u.get(0).querySelector("*:invalid");a&&(a.focus(),a.scrollIntoView({block:"center",inline:"center"}))}),w(".wc-pao-addon-image-swatch"));a.length&&a.tipTip({delay:200})}},m=function(){return"rtl"===document.documentElement.dir};w("body").on("quick-view-displayed",function(){w(this).find(".cart:not(.cart_group)").each(function(){g.init(w(this))})}),w("body .component").on("wc-composite-component-loaded",function(){w(this).find(".cart").each(function(){g.init(w(this))})}),w("body").find(".cart:not(.cart_group)").each(function(){g.init(w(this))})});